{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AddToCartComponent = class AddToCartComponent {\n  constructor(IS, toaster) {\n    this.IS = IS;\n    this.toaster = toaster;\n  }\n  ngOnInit() {\n    this.cartData();\n  }\n  plusQuantity(cart, id, qty) {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    if (userId) {\n      if (qty < 9) {\n        qty++;\n        this.IS.updateCartQuantityPlus(id, qty).subscribe(res => {\n          this.cartData();\n          this.toaster.QuantityUpdatedPlus(cart.item_name);\n        }, err => {});\n      }\n    } else {\n      if (qty < 9) {\n        qty++;\n        this.IS.LocalupdateCartQuantityPlus(id, qty).subscribe(res => {\n          this.cartData();\n          this.toaster.QuantityUpdatedPlus(cart.item_name);\n        }, err => {});\n      }\n    }\n  }\n  minusQuantity(item, id, qty) {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    if (userId) {\n      if (qty > 0) {\n        qty--;\n        this.IS.updateCartQuantityMinus(id, qty).subscribe(res => {\n          this.cartData();\n          if (qty > 0) {\n            this.toaster.QuantityUpdatedMinus(item.item_name);\n          }\n          if (qty == 0) {\n            this.toaster.RemoveCart(item.item_name);\n            localStorage.removeItem(\"MyItems\");\n          }\n        }, err => {});\n      }\n    } else {\n      if (qty > 0) {\n        qty--;\n        this.IS.LocalupdateCartQuantityMinus(id, qty).subscribe(res => {\n          this.cartData();\n          if (qty > 0) {\n            this.toaster.QuantityUpdatedMinus(item.item_name);\n          }\n          if (qty == 0) {\n            this.toaster.RemoveCart(item.item_name);\n            // Retrieve the data from local storage\n            let data = JSON.parse(localStorage.getItem('MyItems') || \"[]\");\n            // Filter out the data to remove based on the ID\n            data = data.filter(item => item.id !== id);\n            // Store the updated array back to local storage\n            localStorage.setItem('MyItems', JSON.stringify(data));\n          }\n        }, err => {});\n      }\n    }\n  }\n  cartData() {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    if (userId) {\n      this.IS.getCartDataByUserID(userId).subscribe(res => {\n        this.cartList = res.data;\n        this.cartCount = res.data.length;\n        this.grandTotal = res.grandTotal;\n      });\n    } else {\n      this.IS.getLocalData().subscribe(res => {\n        this.cartList = res.data;\n        this.grandTotal = res.grandTotal;\n        console.log(\"LOCAL\", res);\n      });\n    }\n  }\n};\nAddToCartComponent = __decorate([Component({\n  selector: 'app-add-to-cart',\n  templateUrl: './add-to-cart.component.html',\n  styleUrls: ['./add-to-cart.component.scss']\n})], AddToCartComponent);\nexport { AddToCartComponent };","map":{"version":3,"mappings":"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","names":["Component","AddToCartComponent","constructor","IS","toaster","ngOnInit","cartData","plusQuantity","cart","id","qty","user","localStorage","getItem","userId","JSON","parse","data","updateCartQuantityPlus","subscribe","res","QuantityUpdatedPlus","item_name","err","LocalupdateCartQuantityPlus","minusQuantity","item","updateCartQuantityMinus","QuantityUpdatedMinus","RemoveCart","removeItem","LocalupdateCartQuantityMinus","filter","setItem","stringify","getCartDataByUserID","cartList","cartCount","length","grandTotal","getLocalData","console","log","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["E:\\AngularWithLaravelAPI\\AngularFrontEnd\\src\\app\\components\\add-to-cart\\add-to-cart.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { ItemServiceService } from 'src/app/services/item-service.service';\nimport { ToasterService } from 'src/app/services/toaster.service';\n\n@Component({\n  selector: 'app-add-to-cart',\n  templateUrl: './add-to-cart.component.html',\n  styleUrls: ['./add-to-cart.component.scss']\n})\nexport class AddToCartComponent implements OnInit {\n  cartList: any;\n  quantity: any;\n  grandTotal: any;\n\n  constructor(private IS: ItemServiceService, private toaster:ToasterService) { }\n\n  ngOnInit() {\n    this.cartData();\n  }\n\n  plusQuantity(cart:any, id: any, qty: any) {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    if (userId) {\n      if (qty < 9) {\n        qty++;\n        this.IS.updateCartQuantityPlus(id, qty).subscribe((res: any) => {\n          this.cartData();\n          this.toaster.QuantityUpdatedPlus(cart.item_name);\n        }, (err) => {\n        })\n      }\n    } else {\n      if (qty < 9) {\n        qty++;\n        this.IS.LocalupdateCartQuantityPlus(id, qty).subscribe((res: any) => {\n          this.cartData();\n          this.toaster.QuantityUpdatedPlus(cart.item_name);\n        }, (err) => {\n        })\n\n      }\n    }\n  }\n\n\n  minusQuantity(item:any, id: any, qty: any) {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    if (userId) {\n      if (qty > 0) {\n        qty--;\n        this.IS.updateCartQuantityMinus(id, qty).subscribe((res: any) => {\n          this.cartData();\n          if(qty > 0){\n            this.toaster.QuantityUpdatedMinus(item.item_name);\n          }\n\n          if (qty == 0) {\n            this.toaster.RemoveCart(item.item_name);\n            localStorage.removeItem(\"MyItems\");\n          }\n        }, (err) => {\n        })\n      }\n    } else {\n      if (qty > 0) {\n        qty--;\n        this.IS.LocalupdateCartQuantityMinus(id, qty).subscribe((res: any) => {\n          this.cartData();\n          if(qty > 0){\n            this.toaster.QuantityUpdatedMinus(item.item_name);\n          }\n          if (qty == 0) {\n            this.toaster.RemoveCart(item.item_name);\n            // Retrieve the data from local storage\nlet data = JSON.parse(localStorage.getItem('MyItems') || \"[]\") as string[];\n\n// Filter out the data to remove based on the ID\ndata = data.filter((item:any) => item.id !== id);\n\n// Store the updated array back to local storage\nlocalStorage.setItem('MyItems', JSON.stringify(data));\n          }\n        }, (err) => {\n        })\n      }\n    }\n  }\n\n  cartCount: any;\n\n  cartData() {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).data.id;\n    if (userId) {\n      this.IS.getCartDataByUserID(userId).subscribe((res: any) => {\n        this.cartList = res.data;\n        this.cartCount = res.data.length;\n        this.grandTotal = res.grandTotal;\n      });\n    } else {\n      this.IS.getLocalData().subscribe((res: any) => {\n        this.cartList = res.data;\n        this.grandTotal = res.grandTotal;\n        console.log(\"LOCAL\",res);\n\n      })\n    }\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}